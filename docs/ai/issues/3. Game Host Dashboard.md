# Issue #3: Game Host Dashboard

**Status**: ğŸŸ¡ PARTIALLY STARTED (30% complete - UI shell implemented)
**Assignee**: Development Team
**Epic**: Game Control
**Priority**: ğŸŸ¡ Medium (Blocked until Issue #2 complete)
**Last Updated**: 2025-09-14

## Description
Create host interface for game control, buzzer management, and answer adjudication. This is the central control panel where hosts manage live Jeopardy games, control the buzzer system, adjudicate player answers, and manage game flow through all rounds.

### Functional Context
A game of Euno's Jeopardy is meant to be played while all participants are in a voice chat room (e.g. Discord). Most game actions are handled verbally, with the Game Host Dashboard used to manage game flow: Players select clues, make wagers on Daily Doubles, and respond to clue prompts verbally. The dashboard provides the host with the tools needed to facilitate this voice-driven gameplay experience.

## ğŸ¯ Current Implementation Status

### âœ… **Completed Components (Phase 1)**
- **GameService** (`src/services/games/GameService.ts`) - Complete service layer
  - Game CRUD operations (create, read, update, delete)
  - Player management (join, leave, score updates)
  - Buzzer control methods (lock/unlock)
  - Answer and wager management
  - Host authorization checks throughout
- **GameCreator** (`src/components/games/GameCreator.tsx`) - Game creation interface
  - Game creation interface with clue set selection
  - Error handling and user feedback
  - Integration with existing authentication
- **GameHostDashboard** (`src/components/games/GameHostDashboard.tsx`) - UI Shell (615 lines)
  - 6-panel dashboard layout implemented
  - Basic game state display (round, status from database)
  - Player list management (when players exist)
  - Buzzer lock/unlock toggle (visual indicator only)
  - Game ending functionality (working)
- **Navigation System** - Updated App.tsx with tab-based navigation
  - "Load Clue Sets" â†’ "Host Game" â†’ "Game Dashboard" flow
  - Proper state management and component integration

### âœ… **Recent Achievements**
- **Database Issues Resolved**: All RLS policies working correctly
- **UI Foundation Complete**: 6-panel dashboard layout with authentic Jeopardy styling
- **Code Quality**: All SonarQube quality gates passing

### âŒ **Current Limitations (Placeholder/Hardcoded Content)**
- **Game Board**: Shows hardcoded categories and clue values
- **Clue Control**: Displays static example clue text
- **Buzzer Queue**: Shows placeholder "Player Name" entries
- **Control Buttons**: Most buttons are disabled or non-functional
- **Progress Tracking**: Hardcoded "17 clues left" and progress bar

- [ ] **Clue Display Panel** - Display prompt/response text for _Focused Clue_ with:
  - [ ] **Daily Double Wager** - Number input for host to enter verbal wager amount
  - [ ] **Reveal Clue/Response Controls** - Button to reveal clue, then response to all players
  - [ ] **Adjudication Controls** - Mark answer correct/incorrect (applies to _Focused Player_ score)
  - [ ] **Multimedia Preparation** - Framework for audio/video clues (verbal summary display)

- [ ] **Game Status Panel** - Display current game status and controls:
  - [ ] **Game Status** - Show current status ("Lobby", "In Progress", "Completed")
  - [ ] **Current Round** - Show current round ("Jeopardy", "Double Jeopardy", "Final Jeopardy", "Game Over")
  - [ ] **Clues Left** - Display number of clues remaining in current round
  - [ ] **Proceed to Next Round** - Button to advance rounds (disabled until current round finished)

### ğŸš€ **Phase 3: Advanced Features (Private Use Ready)**
- [ ] **Error Handling & Edge Cases**
  - [ ] **Connection Loss Recovery** - Handle player disconnections gracefully
  - [ ] **Invalid Wager Handling** - Validation for Daily Double wagers (min/max limits)
  - [ ] **Simultaneous Buzz Detection** - Clear tie-breaking rules for identical timestamps
  - [ ] **Host Mistake Recovery** - Undo functionality for incorrect adjudications

- [ ] **Desktop Usability & Accessibility**
  - [ ] **Keyboard Shortcuts** - Quick keys for common actions (spacebar for buzzer toggle, etc.)
  - [ ] **Visual Feedback** - Clear state indicators (loading, processing, error states)
  - [ ] **Audio Cues** - Optional sound effects for buzzer events (can be muted)
  - [ ] **Standard Desktop Layout** - Optimized for 1920x1080+ screens

- [ ] **Technical Implementation**
  - [ ] **Real-time Synchronization** - Ensure all players see state changes immediately
  - [ ] **Optimistic Updates** - UI responds instantly while syncing with database
  - [ ] **Conflict Resolution** - Handle race conditions in buzzer timing
  - [ ] **Performance Optimization** - Efficient updates for 10-player games

### ğŸ“± **Phase 4: Public Release Features (Future)**
- [ ] **Mobile responsiveness** - Dashboard usable on tablets/phones
- [ ] **Advanced accessibility** - Screen reader support, etc.
- [ ] **Spectator mode** - Read-only view for non-players
- [ ] **Game recording** - Optional logging for post-game analysis
- [ ] **Custom scoring rules** - Support for house rules or variations

## Acceptance Criteria

### âœ… **Phase 1: Foundation (Complete)**
- [x] **Start new game with selected clue set** - âœ… GameCreator component implemented with clue set integration
- [x] **Host authorization and security** - âœ… Complete authorization checks in GameService
- [x] **Service layer foundation** - âœ… GameService with CRUD operations for games, players, buzzes, answers, wagers
- [x] **Basic dashboard layout** - âœ… GameHostDashboard component with navigation and game state display
- [x] **Integration with existing systems** - âœ… Seamless integration with AuthContext and ClueSetSelector

### ğŸ”„ **Phase 2: Core Buzzer System & Game Flow**
- [ ] **Buzzer Management Panel**
  - [ ] **Buzzer Lock/Unlock Toggle** - Large button displaying lock/unlock status
    - Buzzer status defaults to _locked_
    - Manually _unlocked_ by Host when finished reading clue prompt
    - Automatically _locked_ after player buzzes in, with manual override
  - [ ] **Buzz-In Queue** - Display current order of players who have buzzed in
    - [ ] **Player Names** - Display name of each player who buzzed in
    - [ ] **Player Latency** - Display connection latency in ms
    - [ ] **Buzz-In Time** - Show "0 ms" for first player, relative timing for others
    - [ ] **Latency Compensation** - Fair timing accounting for connection differences
    - [ ] **Player Selection** - Host can select player from queue (makes them _Focused Player_)

- [ ] **Player Management Panel** - List of all players (max 10) with:
  - [ ] **Display Name** - Player's chosen display name
  - [ ] **Score** - Player's current score
  - [ ] **Score Adjustment Controls** - Number input for host corrections
  - [ ] **_Focused Player_ Status** - Highlight current focused player with visual emphasis

- [ ] **Game Board Display Panel** - Full view of game board with:
  - [ ] **Daily Double Indication** - Special visual indicator for host
  - [ ] **Clue Selection** - Host can select clue chosen by _Focused Player_
    - Makes clue the _Focused Clue_, highlights on player UIs without revealing content
    - Choice not locked until host reveals clue (allows corrections)
  - [ ] **Shared Component Architecture** - Reuse components with Player Interface board display

### ğŸ¯ **Game Flow Control Sequence**

The following sequence describes the complete flow of control for a single clue during gameplay:

1. **Clue Selection**: The `Focused Player` verbally chooses a category and a value.

2. **Host Clue Selection**: The `Host` clicks the corresponding clue in the Board Control panel. This makes it the `Focused Clue`, and highlights it on both the Game Host Dashboard as well as the player-facing UI.

3. **Player Confirmation**: The `Focused Player` gives verbal confirmation that this is the clue they selected.

4. **Reveal Prompt**: The `Host` clicks "Reveal Prompt", which displays the clue prompt to all players.

5. **Host Reads Clue**: The `Host` reads the clue prompt aloud.

6. **Buzzer Unlock**: When the `Host` finishes reading, he unlocks the buzzer via the Buzzer Control panel, causing the buzzer to light up on the player-facing UI.

7. **Player Buzzes & Selection**: Once a player has buzzed in, the `Host` selects their name in the Buzzer Queue panel, which makes that player the `Focused Player` (and removes `Focused Player` status from the previous `Focused Player`), and automatically locks the buzzer.

8. **Response Request**: The `Host` tells the `Focused Player` to give their response verbally.

9. **Adjudication**: Once the `Focused Player` gives their response, the `Host` uses the "Mark Correct" or "Mark Wrong" buttons to adjudicate the answer and award or penalize the `Focused Player`'s score. The correct response is visible to the `Host` in the Clue Control panel but is never displayed to players - the `Host` simply states verbally whether the answer is correct.

10. **Next Clue**: After one of the "Mark ..." buttons is clicked, we return to step #1, with the `Focused Player` choosing a new clue.

### ğŸ¯ **Implementation Notes**
- **Voice-Chat Integration**: All verbal interactions (clue selection, wagers, answers) handled through Discord/voice chat
- **Desktop-First Design**: Phase 3 optimized for desktop/laptop users (1920x1080+ screens)
- **Real-time Architecture**: Supabase Realtime for immediate state synchronization across all players
- **State Management**: Focused Player and Focused Clue concepts for clean workflow management
- **Latency Compensation**: Fair buzzer timing accounting for connection speed differences

## Visual Design Reference

### Design Philosophy
Authentic Jeopardy! game show experience. Reference design images in `docs/design-images/` for visual guidance:
- **`Jeopardy Board.jpg`** - Classic game board layout
- **`Jeopardy Question.jpg`** - Clue presentation format
- **`Jeopardy Answer.jpg`** - Answer reveal styling

### Key Visual Elements

#### Color Scheme & Branding
- **Primary Blue**: Deep Jeopardy blue (#060CE9 or similar) for main backgrounds
- **Gold Accents**: Bright gold (#FFD700) for borders, highlights, and active states
- **White Text**: High contrast white text on blue backgrounds
- **Black Backgrounds**: For clue text areas and answer reveals
- **Status Colors**: Green for correct answers, red for incorrect, yellow for pending

#### Typography
- **Title**: 'Annual Normal' (SCSS: `$font-family-title`), uppercase, text shadow
- **Category Headers**: 'Swiss 921' (SCSS: `$font-family-category`), uppercase, text shadow
- **Clue Text**: 'Korinna ITC Bold' (SCSS: `$font-family-clue`), uppercase, text shadow
- **UI Text**: 'Swiss 921' (SCSS: `$font-family-ui`), standard case
- **Monetary Values**: 'Swiss 911 Extra Condensed' (SCSS: `$font-family-money`), uppercase, text shadow

#### Layout Structure
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EUNO'S JEOPARDY - HOST DASHBOARD                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Game Controls: [Lock Buzzer] [Next Round] [End Game]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   GAME BOARD    â”‚ â”‚  PLAYER SCORES  â”‚ â”‚ BUZZER CONTROL  â”‚ â”‚
â”‚ â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚ â”‚
â”‚ â”‚ [Category Grid] â”‚ â”‚ Player 1: $800  â”‚ â”‚ ğŸ”’ LOCKED       â”‚ â”‚
â”‚ â”‚                 â”‚ â”‚ Player 2: $600  â”‚ â”‚                 â”‚ â”‚
â”‚ â”‚ [Clue Display]  â”‚ â”‚ Player 3: $400  â”‚ â”‚ [Unlock Buzzer] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ BUZZER QUEUE    â”‚ â”‚ ANSWER CONTROL  â”‚ â”‚  GAME STATUS    â”‚ â”‚
â”‚ â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚ â”‚
â”‚ â”‚ 1. Player 2     â”‚ â”‚ [Mark Correct]  â”‚ â”‚ Round: Jeopardy â”‚ â”‚
â”‚ â”‚ 2. Player 1     â”‚ â”‚ [Mark Wrong]    â”‚ â”‚ Clues Left: 28  â”‚ â”‚
â”‚ â”‚ 3. Player 3     â”‚ â”‚ [Reset Buzzer]  â”‚ â”‚ Status: Active  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technical Architecture

### Component Structure
- **GameHostDashboard** - Main container component
- **BuzzerManagementPanel** - Buzzer controls and queue display
- **PlayerManagementPanel** - Player list with scores and adjustments
- **GameBoardDisplayPanel** - Shared board component with host-specific features
- **ClueDisplayPanel** - Clue content and adjudication controls
- **GameStatusPanel** - Round progression and game state

### Data Flow
- **Real-time Updates**: Supabase Realtime for immediate state synchronization
- **Optimistic Updates**: UI responds instantly while syncing with database
- **State Management**: Focused Player/Clue concepts for clean workflow
- **Error Handling**: Comprehensive validation and recovery mechanisms

---

*This issue represents the core host experience and is critical for the MVP. Success here enables all other game features and provides the foundation for a professional game hosting experience.*