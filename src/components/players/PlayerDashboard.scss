// Player Dashboard Styles - Optimized for 1080p Desktop
@use "sass:color";
@use "../../styles/variables" as *;
@use "../../styles/mixins" as *;
@use "../../styles/globals" as *;
@use "../../styles/jeopardy-theme" as *;
@use "../../styles/jeopardy-board" as *;
@use "../../styles/jeopardy-clue" as *;
@use "../../styles/jeopardy-podium" as *;
/**
 * PlayerDashboard Styling
 *
 * Styles for the player dashboard component.
 */

.player-dashboard {
  --jeopardy-board-width: 60vw;
  --jeopardy-board-height: calc(var(--jeopardy-board-width) * 9 / 16);

  // Full viewport coverage with authentic Jeopardy background
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-image: url("/assets/images/bg-stage.webp");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;

  // Fallback background color if image doesn't load
  background-color: $jeopardy-background-blue;

  // Ensure content is positioned properly
  overflow: hidden;

  // Base typography for player interface
  font-family: $font-family-base;
  color: $jeopardy-white;

  // Loading and error states
  &.loading,
  &.error {
    display: flex;
    align-items: center;
    justify-content: center;
    background-image: none; // Don't load background for loading/error states
    background-color: $jeopardy-background-blue;
  }

  .loading-message {
    font-size: $font-size-xl;
    color: $jeopardy-gold;
    text-align: center;
    animation: pulse 2s infinite;
  }

  .error-message {
    text-align: center;
    padding: $spacing-xl;
    background: rgba($jeopardy-black, 0.8);
    border-radius: $border-radius-md;
    border: 2px solid $jeopardy-red;

    h3 {
      color: $jeopardy-red;
      margin-bottom: $spacing-md;
      font-size: $font-size-xl;
    }

    p {
      color: $jeopardy-white;
      margin-bottom: $spacing-sm;
      font-size: $font-size-md;

      &:last-child {
        margin-bottom: 0;
        font-size: $font-size-sm;
        color: $jeopardy-light-grey;
      }
    }
  }

  // Animation for loading state
  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  // Jeopardy Round Header
  .jeopardy-board-header {
    position: absolute;
    top: 0px;
    left: 50%;
    transform: translate(-50%, 0%);
    width: 90vw;

    h2 {
      text-align: center;
      font-family: $font-family-title;
      font-size: 3rem;
      color: $jeopardy-white;
      text-shadow: 2px 2px 4px rgba($jeopardy-black, 0.8);
    }
  }

  // Jeopardy Board
  .jeopardy-board-container {
    position: absolute;
    top: 50px;
    left: 50%;
    transform: translate(-50%, 0%);
    width: var(--jeopardy-board-width);
    box-shadow: 30px 30px 30px rgba($jeopardy-black, 0.8);

    .jeopardy-board {
      overflow: visible;

      > .category-header {
        padding: 10%;
        font-size: 1.25rem;
      }
    }

    .dynamic-display-window {
      // Dynamic display window styles handled by JavaScript
    }
  }

  // Player Podiums - Styles moved to PlayerPodiums.scss

  // Clue Display Modal - Styles moved to ClueRevealModal.scss

  // Dynamic Display Window Styles
  .dynamic-display-window {
    // Base container - no default styling, all styles applied via modifier classes
    z-index: 1000;
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translate(-50%, 0%);
    width: var(--jeopardy-board-width);
    height: calc(var(--jeopardy-board-height) + 100px);

    // Clue display styling (regular clues)
    &.jeopardy-clue-display {
      visibility: hidden; // To avoid FOUC
      position: fixed;
      top: 50px;
      left: 50%;
      transform: translate(-50%, 0%);
      transform-origin: center center;
      width: var(--jeopardy-board-width);
      height: unset;
      aspect-ratio: 7/4.5;
      font-size: 3rem;

      &.daily-double-display {
        transform: translate(-50%, -50%);
        top: 50%;
        width: 100%;


        .daily-double-splash {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;

          img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
          }
        }
      }
    }

    // Legacy visible class (for backwards compatibility)
    &.visible {
      opacity: 1;
      visibility: visible;
    }

    .display-content {
      padding: 2rem;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;

      // Category Introduction Content
      &.category-introduction {
        .category-name {
          font-size: 3rem;
          font-weight: 700;
          color: $jeopardy-gold;
          margin-bottom: 1rem;
          text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
          animation: category-glow 2s ease-in-out infinite alternate;
        }

        .category-description {
          font-size: 1.3rem;
          color: rgba(255, 255, 255, 0.9);
          line-height: 1.5;
          max-width: 600px;
        }
      }

      // Clue Reveal Content
      &.clue-reveal {
        .clue-category {
          font-size: 1.5rem;
          color: $jeopardy-gold;
          margin-bottom: 1rem;
          text-transform: uppercase;
          letter-spacing: 2px;
        }

        .clue-value {
          font-size: 2rem;
          color: white;
          margin-bottom: 2rem;
          font-weight: 600;
        }

        .clue-text {
          font-size: 2.5rem;
          color: white;
          line-height: 1.4;
          max-width: 700px;
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .daily-double-indicator {
          position: absolute;
          top: 20px;
          right: 20px;
          background: linear-gradient(135deg, #8B0000 0%, #DC143C 100%);
          color: $jeopardy-gold;
          padding: 0.5rem 1rem;
          border-radius: 8px;
          font-weight: 700;
          font-size: 1.1rem;
          text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
          animation: daily-double-pulse 1.5s ease-in-out infinite alternate;
        }
      }
    }

    // Integrated Buzzer in Display Window
    .display-window-buzzer {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;

      .integrated-buzzer-container {
        .integrated-buzzer {
          width: 120px;
          height: 80px;
          font-size: 1rem;

          .buzzer-state-icon {
            font-size: 1.5rem;
          }
        }
      }
    }
  }

  /**
  * Game Phase Styles
  *
  * Game flow styles initializing components as phases change.
  **/

  &.game_intro {
    .jeopardy-board-container {
      visibility: hidden;
    }
    .player-podium {
      visibility: hidden;
    }
  }
}

// Visual Feedback Classes
.game-board {
  .category-cell {
    &.focused-category {
      background: linear-gradient(135deg, $jeopardy-gold 0%, #DAA520 100%);
      color: $jeopardy-blue;
      animation: category-focus-pulse 2s ease-in-out infinite alternate;
    }
  }

  .clue-cell {
    &.empty-category {
      opacity: 0.3;
      filter: grayscale(100%);
    }
  }
}

// Animations
@keyframes category-glow {
  0% {
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
  }
  100% {
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7), 0 0 30px rgba(255, 215, 0, 0.6);
  }
}

@keyframes daily-double-pulse {
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.05);
  }
}

@keyframes category-focus-pulse {
  0%, 100% {
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }
  50% {
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
  }
}

@keyframes buzz-glow {
  0% { box-shadow: 0 0 0 rgba(255, 215, 0, 0.8); }
  50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
  100% { box-shadow: 0 0 0 rgba(255, 215, 0, 0.8); }
}

@keyframes freeze-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-3px); }
  75% { transform: translateX(3px); }
}

@keyframes freeze {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(0.9); }
}

// Category Display Strip Styles
.jeopardy-category-display-viewport {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 10;

  &[style*="visibility: visible"] {
    visibility: visible !important;
  }
}

.jeopardy-category-display-strip {
  display: flex;
  width: 600%; // 6 categories at 100% each
  height: 100%;
  // Transition removed - now handled by GSAP

  .category-header {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;

    background-image: url('/assets/images/bg-clue.webp');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;

    // Splash images
    .splash-jeopardy {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 2;
    }

    .category-name {
      position: relative;
      color: $jeopardy-white;
      font-family: $font-family-category;
      font-size: 8rem;
      font-weight: bold;
      text-align: center;
      text-shadow: 4px 4px 4px rgba(0, 0, 0, 0.8);
      padding: 1rem;
      line-height: 1;
      text-transform: uppercase;
    }
  }
  // Game Status-Based Styling
  // Game Introduction Phase - Hide board initially
  &.game_intro {
    .jeopardy-board-container {
      .jeopardy-board {
        visibility: hidden;
      }
    }
  }

  // Category Introduction Phase - Hide board categories & money values
  &.introducing_categories {
    .jeopardy-board-container {
      .jeopardy-board {

        background-image: var(--jeopardy-board-bg-image);
        background-size: 100% calc(100% * 5 / 6);
        background-position: bottom;
        background-repeat: no-repeat;
        background-attachment: fixed;
      .category-header {
        background-image: var(--jeopardy-board-bg-image-small);
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        .category-name {
          visibility: hidden;
        }
      }

      .clue-cell {
        background: transparent;
        .clue-value {
          visibility: hidden;
        }
      }
    }
  }
  }
}
